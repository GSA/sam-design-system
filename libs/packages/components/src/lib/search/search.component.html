<form class="usa-form usa-search" [ngClass]="getClass()" role="search">
    <label *ngIf="hasDropdown()" class="usa-sr-only" [attr.for]="searchSettings.dropdown.id">Dropdown label</label>
    <select *ngIf="hasDropdown()" [value]="model.searchCategory? model.searchCategory :''" #selectEl name="search options" aria-label="Search Options" class="usa-select" [attr.id]="searchSettings.dropdown.id" (change)="writeValueToModel()">
     <ng-container *ngFor="let item of searchSettings.dropdown.options">
      <optgroup *ngIf="item.group" label="{{item.label}}">
        <option *ngFor="let child of item.group" [value]="child.value" [selected]="model.searchCategory == child.value"
          [disabled]="child.disabled">
          {{ child.label }}
        </option>
      </optgroup>
      <option *ngIf="!item.group" [value]="item.value" [selected]="model.searchCategory == item.value" [disabled]="item.disabled">{{
        item.label }}</option>
    </ng-container>
  </select>
    <ng-container *ngIf="(searchSettings.dropdown && searchSettings.dropdown.inverse); then inverseTemplate else inputTemplate">
    </ng-container>
</form>

<ng-template #inputTemplate>
    <label class="usa-sr-only" [attr.for]="searchSettings.id">Search</label>
    <input #inputEl [value]="model.searchText? model.searchText :''" 
        [ngClass]="searchSettings?.inputClass" [attr.id]="searchSettings.id" type="search" class="usa-input" name="search" 
        [placeholder]="searchSettings.placeholder ? searchSettings.placeholder : ''"
        [attr.aria-label]="searchSettings.ariaLabel"
        (blur)="focusChange()" (input)="writeValueToModel()" />
    <button #buttonEl class="usa-button" type="submit" (click)="handleClick($event)">
    <span class="usa-sr-only">Search</span>
  </button>
</ng-template>
<ng-template #inverseTemplate>
    <div class="sds-inverse__search">
        <ng-container [ngTemplateOutlet]="inputTemplate"></ng-container>
    </div>
</ng-template>