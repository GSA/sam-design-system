<form [formGroup]="form">
  <formly-form [model]="model" [fields]="fields" [options]="options" [form]="form"></formly-form>
</form>

<ng-template
  #radioTemplate
  let-option
  let-i="i"
  let-to="to"
  let-field="field"
  let-id="id"
  let-showError="showError"
  let-formControl="formControl"
>
  <div class="sds-card icon-radio-option">
    <div class="sds-card__body">
      <div>
        <input
          class="usa-radio__input"
          [ngClass]="{ 'usa-radio__input--tile': to.tile, 'usa-input--error': !showError }"
          [formlyAttributes]="field"
          [id]="id + '_' + i"
          type="radio"
          [name]="id"
          checked="checked"
          [formControl]="formControl"
          [value]="option.value"
        />

        <label class="usa-radio__label" [ngClass]="to.optionsClass ? to.optionsClass : ''" [for]="id + '_' + i">
          <span [innerHtml]="option.label" class="radio-label-text"></span>
        </label>
        <ng-container *ngIf="to.options[i].subText">
          <ul class="sub-text-list">
            <ng-container *ngFor="let subText of to.options[i].subText">
              <li>{{ subText }}</li>
            </ng-container>
          </ul>
        </ng-container>
        <ng-container *ngIf="to.options[i].linkText">
          <a class="radio-link">{{ to.options[i].linkText }}</a>
        </ng-container>
      </div>
      <ng-container *ngIf="to.options[i].icon">
        <div class="radio-icon">
          <usa-icon
            [icon]="to.options[i].icon"
            [size]="'5x'"
            class="icon-display-block"
            ngClass="{{ to.options[i].iconClass }}"
          ></usa-icon>
        </div>
      </ng-container>
    </div>
  </div>
</ng-template>
